import{f as V,j as h}from"./chunk-XP7GFRGV.js";import{Ea as I,Ia as g,Nb as M,Ob as F,Pa as l,Pb as A,Qb as D,Ra as v,Rb as L,Ta as t,Ua as i,Va as c,Ya as C,Z as _,Za as b,_ as x,_a as p,eb as d,fb as u,gb as m,hb as k,nb as S,ob as y,qb as w,sb as T,tb as O,ub as P,va as a,za as E}from"./chunk-RXLJ6G3Z.js";var R=()=>["/candidates/create-candidate"],N=n=>["/candidates/view-candidate",n],$=(n,s,e,o,r)=>({"bg-applied":n,"brand-green-bg":s,"brand-purple-bg":e,"brand-red-bg":o,"bg-info":r}),j=(n,s,e)=>({"score-green":n,"score-yellow":s,"score-red":e}),z=n=>["/candidates/edit-candidate",n];function H(n,s){if(n&1){let e=C();t(0,"div",18),c(1,"i",19),t(2,"strong"),d(3,"API Error:"),i(),d(4),c(5,"br"),t(6,"small",20),d(7,"Showing fallback data instead."),i(),t(8,"button",21),b("click",function(){_(e);let r=p();return x(r.clearError())}),i()()}if(n&2){let e=p();a(4),m(" ",e.error," ")}}function Y(n,s){if(n&1){let e=C();t(0,"div",22),c(1,"i",23),t(2,"strong"),d(3,"Success!"),i(),d(4),t(5,"button",21),b("click",function(){_(e);let r=p();return x(r.clearDeleteSuccess())}),i()()}if(n&2){let e=p();a(4),m(" ",e.deleteSuccess," ")}}function B(n,s){n&1&&(t(0,"div",24)(1,"div",25)(2,"span",26),d(3,"Loading..."),i()(),t(4,"p",27),d(5,"Loading candidates from API..."),i()())}function G(n,s){if(n&1){let e=C();t(0,"li",30)(1,"a",31),b("click",function(){let r=_(e).$implicit,f=p(2);return x(f.setTab(r))}),d(2),t(3,"span",32),d(4),i()()()}if(n&2){let e=s.$implicit,o=p(2);a(),v("active",o.activeTab===e),a(),m(" ",e," "),a(2),m(" ",o.getCandidateCountForTab(e)," ")}}function U(n,s){if(n&1&&(t(0,"ul",28),g(1,G,5,4,"li",29),i()),n&2){let e=p();a(),l("ngForOf",e.tabs)}}function W(n,s){n&1&&(t(0,"div",24),c(1,"i",33),t(2,"h4",20),d(3,"No Candidates Found"),i(),t(4,"p",20),d(5,"There are no candidates available at the moment."),i(),t(6,"a",34),c(7,"i",35),d(8,"Add Your First Candidate "),i()()),n&2&&(a(6),l("routerLink",S(1,R)))}function q(n,s){n&1&&c(0,"span",51)}function J(n,s){n&1&&c(0,"i",52)}function K(n,s){if(n&1){let e=C();t(0,"tr",39)(1,"td")(2,"div"),d(3),i(),t(4,"div",40),d(5),i()(),t(6,"td")(7,"div"),d(8),i(),t(9,"div",40),d(10),i()(),t(11,"td"),d(12),i(),t(13,"td"),d(14),i(),t(15,"td"),d(16),O(17,"date"),i(),t(18,"td")(19,"div"),c(20,"i",41),d(21),i()(),t(22,"td")(23,"span",42),d(24),i()(),t(25,"td")(26,"span",43),c(27,"i",44),i(),d(28),i(),t(29,"td")(30,"div",45)(31,"a",46),c(32,"i",47),i(),t(33,"button",48),b("click",function(){let r=_(e).$implicit,f=p(2);return x(f.deleteCandidate(r))}),g(34,q,1,0,"span",49)(35,J,1,0,"i",50),i()()()()}if(n&2){let e=s.$implicit,o=p(2);l("routerLink",y(22,N,e.id)),a(3),u(e.name),a(2),u(e.role),a(3),u(e.appliedRole),a(2),u(e.department),a(2),u(e.employmentType),a(2),u(e.workType),a(2),u(P(17,19,e.appliedDate,"shortDate")),a(5),m("",e.attachments," "),a(2),l("ngClass",T(24,$,e.status==="Applied",e.status==="Interview",e.status==="In-Review"||e.status==="Hired",e.status==="Rejected",e.status==="Shortlisted")),a(),m(" ",e.status," "),a(2),l("ngClass",w(30,j,e.score>=80,e.score>=50&&e.score<80,e.score<50)),a(2),m(" ",e.score,"% "),a(3),v("disabled",o.isDeletingCandidate(e.id)),l("routerLink",y(34,z,e.id)),a(2),l("disabled",o.isDeletingCandidate(e.id)),a(),l("ngIf",o.isDeletingCandidate(e.id)),a(),l("ngIf",!o.isDeletingCandidate(e.id))}}function Q(n,s){if(n&1&&(t(0,"div",36)(1,"table",37)(2,"thead")(3,"tr")(4,"th"),d(5,"Name"),i(),t(6,"th"),d(7,"Applied Role"),i(),t(8,"th"),d(9,"Employment Type"),i(),t(10,"th"),d(11,"Work Type"),i(),t(12,"th"),d(13,"Applied Date"),i(),t(14,"th"),d(15,"Attachment"),i(),t(16,"th"),d(17,"Status"),i(),t(18,"th"),d(19,"Score (%)"),i(),t(20,"th"),d(21,"Actions"),i()()(),t(22,"tbody"),g(23,K,36,36,"tr",38),i()()()),n&2){let e=p();a(23),l("ngForOf",e.filteredCandidates)}}function X(n,s){if(n&1&&(t(0,"span"),d(1),i()),n&2){let e=p(2);a(),m(" in ",e.activeTab," status")}}function Z(n,s){if(n&1&&(t(0,"div",53)(1,"small"),d(2),g(3,X,2,1,"span",54),i()()),n&2){let e=p();a(2),k(" Showing ",e.filteredCandidates.length," of ",e.candidates.length," candidates "),a(),l("ngIf",e.activeTab!=="All")}}var re=(()=>{class n{apiService;tabs=["All","Applied","In-Review","Interview","Hired","Rejected"];activeTab="All";candidates=[];loading=!1;error=null;deletingCandidateId=null;deleteSuccess=null;constructor(e){this.apiService=e}ngOnInit(){this.loadCandidates()}loadCandidates(){this.loading=!0,this.error=null,this.apiService.getCandidates().subscribe({next:e=>{console.log("Candidates loaded successfully:",e),this.candidates=e,this.loading=!1},error:e=>{console.error("Error loading candidates:",e),this.error=e,this.loading=!1,this.loadFallbackCandidates()}})}loadFallbackCandidates(){console.log("Loading fallback candidates due to API error"),this.candidates=h.getFallbackCandidates()}get filteredCandidates(){return this.activeTab==="All"?this.candidates:this.candidates.filter(e=>e.status===this.activeTab)}getCandidateCountForTab(e){return e==="All"?this.candidates.length:this.candidates.filter(o=>o.status===e).length}setTab(e){this.activeTab=e}refreshCandidates(){this.loadCandidates()}clearError(){this.error=null}clearDeleteSuccess(){this.deleteSuccess=null}deleteCandidate(e){if(!e.id){console.error("Cannot delete candidate without ID");return}confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`)&&(this.deletingCandidateId=e.id,this.error=null,this.deleteSuccess=null,this.apiService.deleteCandidate(e.id).subscribe({next:()=>{console.log("Candidate deleted successfully"),this.deleteSuccess=`Candidate "${e.name}" has been deleted successfully.`,this.deletingCandidateId=null,this.candidates=this.candidates.filter(r=>r.id!==e.id),setTimeout(()=>{this.deleteSuccess=null},3e3)},error:r=>{console.error("Error deleting candidate:",r),this.error=`Failed to delete candidate: ${r}`,this.deletingCandidateId=null,(this.error.includes("API")||this.error.includes("network"))&&(this.candidates=this.candidates.filter(f=>f.id!==e.id),this.deleteSuccess=`Candidate "${e.name}" has been removed locally.`,this.error=null,setTimeout(()=>{this.deleteSuccess=null},3e3))}}))}isDeletingCandidate(e){return e!==void 0&&this.deletingCandidateId===e}static \u0275fac=function(o){return new(o||n)(E(h))};static \u0275cmp=I({type:n,selectors:[["app-candidates"]],decls:28,vars:16,consts:[[1,"container","candidates-bg","p-4"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3","gap-3"],[1,"d-flex","flex-grow-1","gap-2"],["placeholder","Search candidates name, role, etc",1,"form-control",3,"disabled"],[1,"btn","btn-outline-secondary",3,"disabled"],[1,"fas","fa-filter"],[1,"d-flex","align-items-center","gap-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"fas","fa-sync-alt"],["type","text","placeholder","1-30 October, 2030",1,"form-control",2,"width","180px",3,"disabled"],[1,"form-select","form-select-sm",2,"width","auto",3,"disabled"],[1,"btn","brand-green-btn","ms-auto",3,"routerLink"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","nav nav-tabs mb-3",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","mt-3 text-muted",4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"text-muted"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"fas","fa-check-circle","me-2"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"nav","nav-tabs","mb-3"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"badge","bg-light","text-dark","ms-1"],[1,"fas","fa-users","fa-3x","text-muted","mb-3"],[1,"btn","brand-green-btn",3,"routerLink"],[1,"fas","fa-plus","me-2"],[1,"table-responsive"],[1,"table","table-hover","align-middle","candidates-table"],["style","cursor:pointer",3,"routerLink",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"routerLink"],[1,"text-muted","small"],[1,"far","fa-file-alt","me-1"],[1,"badge","status-badge",3,"ngClass"],[1,"score-circle",3,"ngClass"],[1,"fas","fa-circle-notch"],[1,"d-flex","gap-1"],["title","Edit Candidate",1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"fas","fa-edit"],["title","Delete Candidate",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],["class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["class","fas fa-trash",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"fas","fa-trash"],[1,"mt-3","text-muted"],[4,"ngIf"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),c(3,"input",3),t(4,"button",4),c(5,"i",5),d(6," Filter"),i()(),t(7,"div",6)(8,"button",7),b("click",function(){return r.refreshCandidates()}),c(9,"i",8),d(10," Refresh "),i(),c(11,"input",9),t(12,"span"),d(13,"Sort by:"),i(),t(14,"select",10)(15,"option"),d(16,"Latest"),i(),t(17,"option"),d(18,"Oldest"),i()(),t(19,"a",11),d(20,"Add Candidate"),i()()(),g(21,H,9,1,"div",12)(22,Y,6,1,"div",13)(23,B,6,0,"div",14)(24,U,2,1,"ul",15)(25,W,9,2,"div",14)(26,Q,24,1,"div",16)(27,Z,4,3,"div",17),i()),o&2&&(a(3),l("disabled",r.loading),a(),l("disabled",r.loading),a(4),l("disabled",r.loading),a(),v("fa-spin",r.loading),a(2),l("disabled",r.loading),a(3),l("disabled",r.loading),a(5),l("routerLink",S(15,R)),a(2),l("ngIf",r.error),a(),l("ngIf",r.deleteSuccess),a(),l("ngIf",r.loading),a(),l("ngIf",!r.loading),a(),l("ngIf",!r.loading&&r.candidates.length===0&&!r.error),a(),l("ngIf",!r.loading&&r.candidates.length>0),a(),l("ngIf",!r.loading&&r.candidates.length>0))},dependencies:[L,M,F,A,D,V],styles:[`.candidates-bg[_ngcontent-%COMP%]{background:#fdfdfd!important;border-radius:20px;box-shadow:0 8px 32px #3c3c3c14,0 1.5px 4px #3c3c3c0f}.candidates-table[_ngcontent-%COMP%]{border-radius:16px;overflow:hidden;background:#fdfdfd;box-shadow:0 2px 12px #3c3c3c0f}.candidates-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cad2ff!important;color:#222!important;border-bottom:2px solid #e2e1e1;font-weight:600;padding-top:18px;padding-bottom:18px;vertical-align:middle}.candidates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px;vertical-align:middle}.status-badge[_ngcontent-%COMP%]{font-size:.98rem;border-radius:8px;padding:6px 18px;font-weight:500}.brand-green-bg[_ngcontent-%COMP%]{background:#d2f55b!important;color:#222!important}.brand-purple-bg[_ngcontent-%COMP%]{background:#cad2ff!important;color:#222!important}.brand-red-bg[_ngcontent-%COMP%]{background:#ff5a5a!important;color:#fff!important}.score-circle[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:50%;font-size:1.1rem;margin-right:4px}.score-green[_ngcontent-%COMP%]{background:#d2f55b;color:#222}.score-yellow[_ngcontent-%COMP%]{background:#ffeeba;color:#b8860b}.score-red[_ngcontent-%COMP%]{background:#ff5a5a;color:#fff}.brand-green-btn[_ngcontent-%COMP%]{background-color:#d2f55b}.nav-link[_ngcontent-%COMP%]:hover{cursor:pointer}.badge.bg-applied[_ngcontent-%COMP%], .status-badge.bg-applied[_ngcontent-%COMP%]{background:#e6ff5c!important;color:#222!important}
/*# sourceMappingURL=candidates.component-YNLGDNNR.css.map */`]})}return n})();export{re as CandidatesComponent};
//# sourceMappingURL=chunk-BIRPB6SW.js.map
